<!--index.wxml-->
<view class="container">
  <!-- çŠ¶æ€æ å ä½ -->
  <view class="status-bar" style="height: {{statusBarHeight}}px;"></view>
  
  <!-- å†…å®¹åŒºåŸŸ -->
  <scroll-view class="content-area" scroll-y="true" refresher-enabled="true" bindrefresherrefresh="onRefresh" refresher-triggered="{{refreshing}}" enable-back-to-top="true" scroll-with-animation="true">
    <view class="content-list">
      <!-- å†…å®¹å¡ç‰‡åˆ—è¡¨ -->
      <view class="content-card" wx:for="{{contentList}}" wx:key="id">
        <!-- å¡ç‰‡å¤´éƒ¨ -->
        <view class="content-header">
          <view class="content-type">{{item.typeIcon}} {{item.typeName}}</view>
          <view class="content-time">{{item.timeText}}</view>
        </view>
        
        <!-- æ ‡é¢˜ -->
        <view class="content-title">{{item.title}}</view>
        
        <!-- æ­£æ–‡å†…å®¹ -->
        <rich-text class="content-text" nodes="{{item.content}}"></rich-text>
        
        <!-- é“¾æ¥å¡ç‰‡ï¼ˆå¦‚æœæœ‰ï¼‰ -->
        <view class="link-card" wx:if="{{item.linkUrl}}" bindtap="openLink" data-url="{{item.linkUrl}}">
          <view class="link-icon">ğŸ”—</view>
          <view class="link-url">{{item.linkUrl}}</view>
        </view>
        
        <!-- åª’ä½“æ–‡ä»¶ç½‘æ ¼ -->
        <view class="media-grid" wx:if="{{item.mediaList && item.mediaList.length > 0}}">
          <view class="media-item" wx:for="{{item.mediaList}}" wx:for-item="media" wx:key="id" bindtap="previewImage" data-urls="{{item.mediaList}}" data-current="{{media.url}}">
            <image class="media-image" src="{{media.url}}" mode="aspectFill" lazy-load></image>
          </view>
        </view>
        
        <!-- åé¦ˆæ  -->
        <view class="reaction-bar">
          <view class="reactions">
            <view class="reaction-btn" wx:for="{{reactionTypes}}" wx:key="type" bindtap="toggleReaction" data-content-id="{{item.id}}" data-type="{{item.type}}">
              <text class="reaction-emoji">{{item.emoji}}</text>
              <text class="reaction-count">{{item.count > 0 ? item.count : ''}}</text>
            </view>
          </view>
          <view class="share-btn" bindtap="shareContent" data-item="{{item}}">
            <text class="iconfont icon-share">åˆ†äº«</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="load-more" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:elif="{{hasMore}}">
      <text>åŠ è½½æ›´å¤š...</text>
    </view>
    
    <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
    <view class="load-more" wx:elif="{{contentList.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šå†…å®¹äº†</text>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && contentList.length === 0}}">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">æš‚æ— å†…å®¹</view>
      <view class="empty-subtext">ä¸‹æ‹‰åˆ·æ–°è¯•è¯•çœ‹</view>
    </view>
  </scroll-view>
</view>
