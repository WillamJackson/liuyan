<!--debug.wxml-->
<view class="container">
  <view class="debug-header">
    <text class="debug-title">API连接测试</text>
  </view>
  
  <view class="status-section">
    <view class="status-label">连接状态：</view>
    <view class="status-value {{apiStatus.includes('成功') ? 'success' : (apiStatus.includes('失败') ? 'error' : 'testing')}}">
      {{apiStatus}}
    </view>
  </view>
  
  <view class="button-section">
    <button class="retry-btn" bindtap="retryTest" disabled="{{loading}}">
      {{loading ? '测试中...' : '重新测试'}}
    </button>
    <button class="copy-btn" bindtap="copyError" wx:if="{{apiStatus.includes('失败')}}">
      复制错误信息
    </button>
  </view>
  
  <view class="results-section" wx:if="{{testResults.length > 0}}">
    <view class="section-title">获取到的数据 ({{testResults.length}}条)：</view>
    <scroll-view class="results-list" scroll-y="true">
      <view class="result-item" wx:for="{{testResults}}" wx:key="id">
        <view class="result-header">
          <text class="result-type">{{item.typeIcon}} {{item.typeName}}</text>
          <text class="result-time">{{item.timeText}}</text>
        </view>
        <view class="result-title">{{item.title}}</view>
        <view class="result-content">{{item.content}}</view>
        <view class="result-media" wx:if="{{item.mediaList.length > 0}}">
          媒体文件: {{item.mediaList.length}}个
        </view>
      </view>
    </scroll-view>
  </view>
</view> 